// https://github.com/scalacenter/scalafix.git#main

vars.proj.scalafix: ${vars.base} {
  name: "scalafix"
  uri: "https://github.com/scalacenter/scalafix.git#0686db1433f6e4bb4e370f049d464ee562094b90"

  extra.exclude: [
    // out of scope
    "docs"
    // it would really be better if we could build and run the tests, but
    // the effort to do so in https://github.com/scala/community-build/pull/1290
    // ran aground. we should try again once ScalaTest 3.0 doesn't need to be part
    // of the picture anymore
    "unit"
  ]
  extra.commands: ${vars.default-commands} [
    // so we can still build even with -Xsource:3
    """set testsInput / Compile / unmanagedSources / excludeFilter := HiddenFileFilter || "ConstructorProcedureSyntax.scala" || "ProcedureSyntax.scala" || "ExplicitUnit.scala" || "BetterRscCompat.scala" || "RemoveUnusedTerms.scala" || "AnnotationScopes.scala" || "NoValInForComprehension.scala" || "AnchorExpression.scala" || "AnchorMultipleRules.scala" || "NoUnitInsertion.scala""""
    """set testsOutput / Compile / unmanagedSources / excludeFilter := HiddenFileFilter || "NoValInForComprehension.scala" || "BetterRscCompat.scala" || "RemoveUnusedTerms.scala""""
  ]
}
