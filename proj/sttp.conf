// https://github.com/softwaremill/sttp.git#6ec13ab8c57714830ea8220f54f682784cb561f8  # was master

// frozen (November 2020) because the monix integration stopped compiling,
// perhaps because we have monix frozen unstream. at some point we could
// either unfreeze monix or simply drop the integration here? no rush

vars.proj.sttp: ${vars.base} {
  name: "sttp"
  uri: "https://github.com/softwaremill/sttp.git#6ec13ab8c57714830ea8220f54f682784cb561f8"

  extra.exclude: [
    "*JS", "*2_11", "*2_12", "*0_27"
    "*scalaz*", "*Scalaz*", "*zio*", "*Zio*"
    "examples", "docs"
    // it's fine to exclude subprojects based on cost/benefit, there's no great
    // gain in having every single integration
    "upickle"
  ]
  // this is for the tests that run unforked...
  extra.options: ["-Dakka.fail-mixed-versions=false"]
  extra.commands: ${vars.default-commands} [
    // ...and this is for the tests that run forked
    """set ThisBuild / javaOptions += "-Dakka.fail-mixed-versions=false""""
  ]
}
