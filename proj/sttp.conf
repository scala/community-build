// https://github.com/softwaremill/sttp.git#master

vars.proj.sttp: ${vars.base} {
  name: "sttp"
  uri: "https://github.com/softwaremill/sttp.git#d1d56cb1991bea3bfe98e0266d50694f176445ae"

  extra.options: ["-Dakka.fail-mixed-versions=false"]
  extra.projects: ["rootJVM"]   // aggregates
  extra.exclude: [
    // it's fine, we don't need to have every last subproject
    "monix", "okhttpBackendMonix", "asyncHttpClientBackendMonix", "httpClientBackendMonix"
    "scalaz", "zio", "asyncHttpClientBackendZio", "asyncHttpClientBackendScalaz",
    "asyncHttpClientBackendZio-streams", "circe", "examples"
  ]
  extra.commands: ${vars.default-commands} [
     // without this, we have seen several different errors:
     // * java.lang.LinkageError: loader constraint violation: loader sbt.internal.ManagedClassLoader$ZombieClassLoader @45e802a3 wants to load class akka.actor.DeathPactException
     // * scala.MatchError: org.apache.logging.log4j.simple.SimpleLoggerContext@6f982081 (of class org.apache.logging.log4j.simple.SimpleLoggerContext
     "set every closeClassLoaders := false"
  ]
}
