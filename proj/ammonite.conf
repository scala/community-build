// https://github.com/scalacommunitybuild/Ammonite.git#community-build-2.13  # was com-lihaoyi, master

// forked to add sbt build (instead of mill); fork refreshed October 2024

vars.proj.ammonite: ${vars.base} {
  name: "ammonite"
  uri: "https://github.com/scalacommunitybuild/Ammonite.git#b50d25f8b9458c394f6691b90a99c451c0775f3c"

  // it would be nice to actually run the tests and not just compile them...
  extra.test-tasks: ["compile"]
  extra.commands: ${vars.default-commands} [
    // doesn't seem worth investigating, we don't need to compile every last test
    """set repl / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "SourceTests.scala""""
    """set amm  / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "AmmoniteBuildServerTests.scala" || "MainTests.scala""""
  ]
}
