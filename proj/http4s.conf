// https://github.com/http4s/http4s.git#main

vars.proj.http4s: ${vars.base} {
  name: "http4s"
  uri: "https://github.com/http4s/http4s.git#d00a1dcb8d864ec43857ae9491707ce3fbe5f15f"

  extra.commands: ${vars.default-commands} [
    "set every gpgWarnOnFailure := true"
    // java.net.ConnectException on all of these
    """set client.jvm / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "JavaNetClientSuite.scala""""
    """set jettyClient / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "JettyClientSuite.scala""""
    """set asyncHttpClient / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "AsyncHttpClientSuite.scala""""
    """set okHttpClient / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "OkHttpClientSuite.scala""""
    """set emberClient.jvm / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "EmberClientSuite.scala""""
    // got tired of these intermittently failing
    """set blazeClient / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "BlazeClientSpec.scala" || "BlazeHttp1ClientSuite.scala" || "ClientTimeoutSpec.scala""""
    """set blazeServer / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "Http1ServerStageSpec.scala""""
    // not investigated
    """set tomcatServer / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "TomcatServerSuite.scala""""
  ]
  extra.exclude: [
    "root*", "*JS", "bench", "docs", "website", "node-serverless"
    // some yarn problem
    "examples-ember-client-h2"
  ]
}
