// https://github.com/scalacommunitybuild/specs2.git#community-build-2.12  # was etorreborre, 5965a76e91d5dc34d6ef9261822b2feb859e3c33

// frozen (June 2021) at a commit just before an upgrade to Cats-Effect 3
// (which I don't expect we'll ever have in the 2.12 build)

// and then forked (March 2023) to make it work on JDK 20

vars.proj.specs2: ${vars.base} {
  name: "specs2"
  uri: "https://github.com/scalacommunitybuild/specs2.git#ad099893e7993d7955d6a5ed06631b0e9465415b"

  extra.sbt-version: ${vars.sbt-1-5-version}  // https://github.com/scoverage/sbt-scoverage/issues/372
  extra.options: [${?SECURITY_MANAGER}]
  // I don't see a project that aggregates JVM-only stuff, so...
  extra.projects: [
    "analysisJVM", "commonJVM", "coreJVM", "fpJVM"
    "matcherExtraJVM", "matcherJVM", "mockJVM", "junitJVM"
    "scalacheckJVM"
  ]
  extra.commands: ${vars.default-commands} [
    "set every credentials := Seq()"
    // makes "configuration not public" errors downstream go away
    "set every publishMavenStyle := false"
  ]
}

// keep this stuff separate so the overall dependency tree is
// flatter and when dependencies fail they don't take out every
// specs2-using project downstream

vars.proj.specs2-more: ${vars.base} {
  name: "specs2-more"
  uri: "https://github.com/scalacommunitybuild/specs2.git#ad099893e7993d7955d6a5ed06631b0e9465415b"

  extra.sbt-version: ${vars.sbt-1-5-version}  // https://github.com/scoverage/sbt-scoverage/issues/372
  extra.options: [${?SECURITY_MANAGER}]
  extra.projects: [
    "shapelessJVM", "catsJVM", "examplesJVM"
  ]
  extra.exclude: [
    // already built in "specs2"
    "analysisJVM", "commonJVM", "coreJVM", "fpJVM", "matcherExtraJVM", "matcherJVM",
    "mockJVM", "junitJVM", "scalacheckJVM", "xmlJVM",
  ]
  extra.commands: ${vars.default-commands} [
    "set every credentials := Seq()"
    // not sure if necessary, but we have it in the specs entry, so let's have it here too
    "set every publishMavenStyle := false"
  ]
}
