// https://github.com/functional-streams-for-scala/fs2.git#main

// note that this repo has required JDK 11 for building (since January 2020)

vars.proj.fs2: ${vars.base} {
  name: "fs2"
  uri: "https://github.com/functional-streams-for-scala/fs2.git#0d5de35860b0734163c28ffb547bb4e22ef91eed"

  // no Scala.js, no benchmarks or docs
  extra.projects: ["coreJVM", "reactiveStreams", "io"]
  // they use GeneratorDrivenPropertyChecks which is only available in a ScalaTest 3.3 snapshot;
  // so, don't even compile tests, let alone run them
  extra.run-tests: false
  extra.commands: ${vars.default-commands} [
    "removeDependency org.scalatestplus scalatestplus-testng"
    """set coreJVM / Test / unmanagedSourceDirectories := Seq()"""
    """set coreJVM / Test / managedSources := Seq()"""
    """set reactiveStreams / Test / unmanagedSourceDirectories := Seq()"""
    """set io / Test / unmanagedSourceDirectories := Seq()"""
    // otherwise sbt-gpg errors on `publish`
    "set every gpgWarnOnFailure := true"
  ]
}
