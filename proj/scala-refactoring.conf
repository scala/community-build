// https://github.com/scalacommunitybuild/scala-refactoring.git#community-build-2.12  # was scala-ide, master

// forked (August 2019) to fix some bad Scala-version-checking code, as per
// https://github.com/scala/scala-dev/issues/644#issuecomment-520562911
// adjusted (Nov 2020) for the Reporter changes in 2.12.13
// adjusted (Nov 2020) for the ArrayCharSequence change in 2.12.13
// adjusted (Nov 2020) to fix a flaky test: https://github.com/scalacommunitybuild/scala-refactoring/pull/1

vars.proj.scala-refactoring: ${vars.base} {
  name: "scala-refactoring"
  uri: "https://github.com/scalacommunitybuild/scala-refactoring.git#13f187bc647dbcb596774fc7cceaa38d6a43379d"

  extra.commands: ${vars.default-commands} [
    // these started failing recently, see
    // https://github.com/scala/scala/pull/8618#issuecomment-577989927
    // (RefactoringTestSuite mentions the other two, so must be excluded as well)
    """set excludeFilter in (Test, unmanagedSources) := HiddenFileFilter || "InlineLocalTest.scala" || "SourceGenTest.scala" || "RefactoringTestSuite.scala""""
  ]
}
