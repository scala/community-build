// https://github.com/scalacommunitybuild/scala-ssh.git#community-build-2.12  # was sirthias, master

// forked from a known-green commit sometime before a ScalaTest 3.1 upgrade;
// fork updated (August 2022) to remove `-target:jvm-1.8` (deprecated in Scala 2.12.17)

vars.proj.scala-ssh: ${vars.base} {
  name: "scala-ssh"
  uri: "https://github.com/scalacommunitybuild/scala-ssh.git#695c7d147df44575b425a29d9960e2536051d3a6"

  // compilation errors on 1.3.9?!
  // ScpTransferable.scala:52:33: not enough arguments for constructor LoggingTransferListener: (x$1: net.schmizz.sshj.common.LoggerFactory)net.schmizz.sshj.xfer.LoggingTransferListener.
  // it's reproducible outside dbuild, and on master HEAD as well
  extra.sbt-version: "1.3.8"
  // we have to disable this early (extra.commands isn't soon enough)
  // or scalafmt will run `update` and `cloc-plugin` won't be found
  // (at least, this is was true at one time)
  extra.settings: ${vars.base.extra.settings} [
    "scalafmtOnCompile := false"
  ]
  extra.commands: [
    "set every gpgWarnOnFailure := true"
  ]
  check-missing: false  // ignore missing scalafmt
  deps.ignore: ["com.geirsson#scalafmt-core", "com.lucidchart#scalafmt-impl"]
  // Known test failures: https://github.com/sirthias/scala-ssh/issues/38
  extra.test-tasks: "compile"
}
